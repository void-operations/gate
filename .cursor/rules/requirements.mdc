---
alwaysApply: true
---
* Project Overview
  * Name: Not decided yet. Please suggest a name
  * Purpose: One-button software deployment to target PCs. All deployments are recorded. Software version changes on each PC can be tracked.
  * Target Customers
    * Software Developers
      * Busy developing while needing to handle deployments and manage deployment versions
      * Software deployment environment: Windows, and firmware files
  * Core Values/Principles
    * Convenience. Simplicity. Aim for one-touch UI
    * Local First 개발 정책
    * 보안을 항상 고려한다
* Programming Languages
  * Python and C# are used
  * Deployment
    * Master is deployed on Linux using Docker and Docker Compose
    * Agent must be deployed together so it can be downloaded from Master
  * Web frontend uses a framework with many default components (no designer needed)
    * Prefer Materialized themes
  * Development Environment
    * macOS 14
    * Cursor
    * GitHub
* Development Workflow
  * Deployment Process: Using GitHub Actions
    * Master build
    * Agent build
      * Build artifacts must be uploaded to Master
    * Master - Agent integration tests
  * Use this project itself for version management
  * Version Tagging Rule
    * {deployment-stage}-{date}-{number}
  * Solo development, so code reviews are not conducted separately
* Architecture
  * Master - Agent structure
    * Master has web server - web client
    * Agent is .exe for Windows, executable file for Mac
  * Always apply Clean Architecture
* Testing
  * Unit Tests
    * Always add unit tests when adding functions
    * Use Mocks for testing when external system integration is needed
* Non-Functional Requirements
  * Enterprise Model: Use Authorization matrix for authentication
  
* Error Handling
  * Errors from master and agent are collected using Sentry
  * Users can provide feedback via email

* Requirements
  * Core Model
    * All requirements must be provided as UI in the web frontend
    * Stakeholder: Only 1 Software programmer
    * Releasable Software Management
      * Use PostgreSQL 
        * In Development, use sqlite3
        * Use ORM for version management 
      * Can add GitHub releases
        * When adding a GitHub release, only the GitHub release URL is required (repository name is automatically extracted and used as the release name)
        * Github release url (e.g., https://github.com/jameskwon07/3project/releases/) can be entered to query versions and fetch artifacts from within
      * Can remove GitHub releases
        * Even after deletion, it remains in the Database. 
    * Agent Management
      * Can add agents
      * Can remove agents
      * 주기적으로 상태를 Master 서버로 전달한다. 
    * Deployment: Can select Agent and Release version to deploy
      * Can select a version from Releases and an Agent to deploy
      * Can filter deployment history
        * Filter options: Agent, date, software, software version
    * Batch Deployment: Can deploy multiple Release software to an Agent at once
    * Agent Deployment Execution
      * Agent polls Master for pending deployments
      * Agent fetches release details from Master API (GET /api/releases/{release_id})
      * Agent downloads release artifacts from GitHub releases
      * Agent installs/executes software based on platform
        * Windows: Executes .exe files
        * macOS: Executes executable files
      * Agent verifies installation success
      * Agent reports deployment completion status to Master
    * User Settings
      * Can add one GitHub token
      * Can remove GitHub token
      * Can update existing GitHub token value


  * Enterprise Model
    * (To be defined)
